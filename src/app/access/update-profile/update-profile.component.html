<div class="wrapper">
    <!-- Sidebar  -->
    <app-sidemenu></app-sidemenu>

    <!-- Page Content  -->
    <div id="content">

        <app-header></app-header>

        <div class="form-bg">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        <form class="form-horizontal" #employeeForm="ngForm">
                            <div class="header">Update Profile Information</div>
                            <div class="form-content">
                                <h4 class="heading">Personal Details</h4>
                                <div class="form-group row">
                                    <div class="col-md-4">
                                        <label for="employeeid" class="control-label field-required">
                                            <i class="fas fa-id-badge"></i>
                                        </label>
                                        <input class="form-control" type="text" name="empsName" id="empsId"
                                            placeholder="Enter Employee ID" [(ngModel)]="employeeId" disabled required>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="firstname" class="control-label field-required">
                                            <i class="fas fa-user"></i>
                                        </label>
                                        <input class="form-control" type="text" name="firstname" id="firstnameId"
                                            placeholder="Enter First Name" pattern="[a-zA-Z\s]*"
                                            [ngClass]="{'is-error': (firstname?.invalid && (firstname?.dirty || firstname?.touched)) && firstname?.errors?.required}"
                                            [(ngModel)]="firstName" #firstname="ngModel" required>
                                        <span class="is-error-note"
                                            *ngIf="firstname?.invalid && (firstname?.dirty || firstname?.touched)">
                                            <span *ngIf="firstname?.errors?.required">First Name is required.</span>
                                            <span *ngIf="firstname?.errors?.pattern">First Name should be include
                                                characters only.</span>
                                        </span>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="middlename" class="control-label field-required">
                                            <i class="fas fa-user-alt"></i>
                                        </label>
                                        <input class="form-control" type="text" name="middlename" id="middlenameId"
                                            placeholder="Enter Middle Name" pattern="[a-zA-Z\s]*"
                                            [ngClass]="{'is-error': (middlename?.invalid && (middlename?.dirty || middlename?.touched)) && middlename?.errors?.required}"
                                            [(ngModel)]="middleName" #middlename="ngModel" required>
                                        <span class="is-error-note"
                                            *ngIf="middlename?.invalid && (middlename?.dirty || middlename?.touched)">
                                            <span *ngIf="middlename?.errors?.required">Middle Name is required.</span>
                                            <span *ngIf="middlename?.errors?.pattern">Middle Name should be include
                                                characters only.</span>
                                        </span>
                                    </div>
                                    <div class="col-md-4 mt-3">
                                        <label for="lastname" class="control-label field-required">
                                            <i class="fas fa-user"></i>
                                        </label>
                                        <input class="form-control" type="text" name="lastname" id="lastnameId"
                                            placeholder="Enter Last Name" pattern="[a-zA-Z\s]*"
                                            [ngClass]="{'is-error': (lastname?.invalid && (lastname?.dirty || lastname?.touched)) && lastname?.errors?.required}"
                                            [(ngModel)]="lastName" #lastname="ngModel" required>
                                        <span class="is-error-note"
                                            *ngIf="lastname?.invalid && (lastname?.dirty || lastname?.touched)">
                                            <span *ngIf="lastname?.errors?.required">Last Name is required.</span>
                                            <span *ngIf="lastname?.errors?.pattern">Last Name should be include
                                                characters only.</span>
                                        </span>
                                    </div>
                                    <div class="col-md-4 mt-3">
                                        <label for="username" class="control-label field-required">
                                            <i class="fas fa-user-check"></i>
                                        </label>
                                        <input class="form-control" type="text" name="username" id="usernameId"
                                            placeholder="Enter User Name" pattern="[a-zA-Z0-9]*"
                                            [ngClass]="{'is-error': (username?.invalid && (username?.dirty || username?.touched)) && username?.errors?.required}"
                                            [(ngModel)]="userName" #username="ngModel" required>
                                        <span class="is-error-note"
                                            *ngIf="username?.invalid && (username?.dirty || username?.touched)">
                                            <span *ngIf="username?.errors?.required">User Name is required.</span>
                                            <span *ngIf="username?.errors?.pattern">User Name should be include
                                                characters only.</span>
                                        </span>
                                    </div>
                                    <div class="col-md-4 mt-3">
                                        <label for="emailid" class="control-label field-required">
                                            <i class="fas fa-envelope"></i>
                                        </label>
                                        <input class="form-control" type="email" name="emailname" id="emailid"
                                            placeholder="Enter Email ID"
                                            [ngClass]="{'is-error': (emailname?.invalid && (emailname?.dirty || emailname?.touched)) && emailname?.errors?.required}"
                                            [(ngModel)]="email" #emailname="ngModel" required>
                                        <span class="is-error-note"
                                            *ngIf="emailname?.invalid && (emailname?.dirty || emailname?.touched)">
                                            <span *ngIf="emailname?.errors?.required">Email ID is required.</span>
                                        </span>
                                    </div>
                                    <div class="col-md-4 mt-3">
                                        <label for="phonenumber" class="control-label field-required">
                                            <i class="fas fa-phone"></i>
                                        </label>
                                        <input class="form-control" type="number" name="phonename" id="phoneId"
                                            placeholder="Enter Phone Number" pattern="[0-9]*"
                                            [ngClass]="{'is-error': (phonename?.invalid && (phonename?.dirty || phonename?.touched)) && phonename?.errors?.required}"
                                            [(ngModel)]="phoneNumber" #phonename="ngModel" required>
                                        <span class="is-error-note"
                                            *ngIf="phonename?.invalid && (phonename?.dirty || phonename?.touched)">
                                            <span *ngIf="phonename?.errors?.required">Phone Number is required.</span>
                                            <span *ngIf="phonename?.errors?.pattern">Phone Number should be include
                                                numbers only.</span>
                                        </span>
                                    </div>
                                    <div class="col-md-4 mt-3">
                                        <label for="dateofbirth" class="control-label field-required">
                                            <i class="fas fa-calendar"></i>
                                        </label>
                                        <input class="form-control" type="date" name="datename" id="dateId"
                                            [ngClass]="{'is-error': (datename?.invalid && (datename?.dirty || datename?.touched)) && datename?.errors?.required}"
                                            [(ngModel)]="dateOfBirth" #datename="ngModel" required>
                                        <span class="is-error-note"
                                            *ngIf="datename?.invalid && (datename?.dirty || datename?.touched)">
                                            <span *ngIf="datename?.errors?.required">Date of Birth is required.</span>
                                        </span>
                                    </div>
                                    <div class="col-md-4 mt-3">
                                        <label for="bloodgroup" class="control-label field-required">
                                            <i class="fas fa-hospital"></i>
                                        </label>
                                        <select class="form-control" name="bloodgroup" id="bloodgroupId"
                                            [ngClass]="{'is-error': (bloodgroup?.invalid && (bloodgroup?.dirty || bloodgroup?.touched)) && bloodgroup?.errors?.required}"
                                            [(ngModel)]="bloodGroup" #bloodgroup="ngModel" required>
                                            <option value="null" selected disabled>Select Blood Group :</option>
                                            <option value="ab+">AB+</option>
                                            <option value="ab">AB-</option>
                                            <option value="o+">O+</option>
                                            <option value="o-">O-</option>
                                        </select>
                                        <span class="is-error-note"
                                            *ngIf="bloodgroup?.invalid && (bloodgroup?.dirty || bloodgroup?.touched)">
                                            <span *ngIf="bloodgroup?.errors?.required">Blood Group is required.</span>
                                        </span>
                                    </div>
                                    <div class="col-md-4 mt-3">
                                        <label for="statusname" class="control-label field-required">
                                            <i class="fas fa-user-tag"></i>
                                        </label>
                                        <select class="form-control" name="statusname" id="statusId"
                                            [ngClass]="{'is-error': (statusname?.invalid && (statusname?.dirty || statusname?.touched)) && statusname?.errors?.required}"
                                            [(ngModel)]="maritalStatus" #statusname="ngModel" required>
                                            <option value="null" selected disabled>Select Marital Status :</option>
                                            <option value="single">Single</option>
                                            <option value="married">Married</option>
                                        </select>
                                        <span class="is-error-note"
                                            *ngIf="statusname?.invalid && (statusname?.dirty || statusname?.touched)">
                                            <span *ngIf="statusname?.errors?.required">
                                                Marital Status is required.
                                            </span>
                                        </span>
                                    </div>
                                </div>
                                <h4 class="heading">Address Details</h4>
                                <div class="form-group row">
                                    <div class="col-md-4">
                                        <label for="address" class="control-label field-required">
                                            <i class="fas fa-address-card"></i>
                                        </label>
                                        <input class="form-control" type="text" name="addressname" id="addressId"
                                            placeholder="Enter Address"
                                            [ngClass]="{'is-error': (addressname?.invalid && (addressname?.dirty || addressname?.touched)) && addressname?.errors?.required}"
                                            [(ngModel)]="address" #addressname="ngModel" required>
                                        <span class="is-error-note"
                                            *ngIf="addressname?.invalid && (addressname?.dirty || addressname?.touched)">
                                            <span *ngIf="addressname?.errors?.required">Address is required.</span>
                                        </span>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="cityname" class="control-label field-required">
                                            <i class="fas fa-address-book"></i>
                                        </label>
                                        <input class="form-control" type="text" name="cityname" id="cityid"
                                            placeholder="Enter City" pattern="[a-zA-Z\s]*"
                                            [ngClass]="{'is-error': (cityname?.invalid && (cityname?.dirty || cityname?.touched)) && cityname?.errors?.required}"
                                            [(ngModel)]="cityName" #cityname="ngModel" required>
                                        <span class="is-error-note"
                                            *ngIf="cityname?.invalid && (cityname?.dirty || cityname?.touched)">
                                            <span *ngIf="cityname?.errors?.required">City is required.</span>
                                            <span *ngIf="cityname?.errors?.pattern">City should be include characters
                                                only.</span>
                                        </span>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="statename" class="control-label field-required">
                                            <i class="fas fa-address-book"></i>
                                        </label>
                                        <input class="form-control" type="text" name="statename" id="stateId"
                                            placeholder="Enter State" pattern="[a-zA-Z\s]*"
                                            [ngClass]="{'is-error': (statename?.invalid && (statename?.dirty || statename?.touched)) && statename?.errors?.required}"
                                            [(ngModel)]="stateName" #statename="ngModel" required>
                                        <span class="is-error-note"
                                            *ngIf="statename?.invalid && (statename?.dirty || statename?.touched)">
                                            <span *ngIf="statename?.errors?.required">State is required.</span>
                                            <span *ngIf="statename?.errors?.pattern">State should be include characters
                                                only.</span>
                                        </span>
                                    </div>
                                    <div class="col-md-4 mt-3">
                                        <label for="countryname" class="control-label field-required">
                                            <i class="fas fa-address-book"></i>
                                        </label>
                                        <input class="form-control" type="text" name="countryname" id="countryId"
                                            placeholder="Enter Country" pattern="[a-zA-Z\s]*"
                                            [ngClass]="{'is-error': (countryname?.invalid && (countryname?.dirty || countryname?.touched)) && countryname?.errors?.required}"
                                            [(ngModel)]="countryName" #countryname="ngModel" required>
                                        <span class="is-error-note"
                                            *ngIf="countryname?.invalid && (countryname?.dirty || countryname?.touched)">
                                            <span *ngIf="countryname?.errors?.required">Country is required.</span>
                                            <span *ngIf="countryname?.errors?.pattern">Country should be include
                                                characters only.</span>
                                        </span>
                                    </div>
                                    <div class="col-md-4 mt-3">
                                        <label for="zipcode" class="control-label field-required">
                                            <i class="fas fa-address-book"></i>
                                        </label>
                                        <input class="form-control" type="number" name="zipcodename" id="zipcodeId"
                                            placeholder="Enter Zip Code" pattern="[0-9]*"
                                            [ngClass]="{'is-error': (zipcodename?.invalid && (zipcodename?.dirty || zipcodename?.touched)) && zipcodename?.errors?.required}"
                                            [(ngModel)]="zipCode" #zipcodename="ngModel" required>
                                        <span class="is-error-note"
                                            *ngIf="zipcodename?.invalid && (zipcodename?.dirty || zipcodename?.touched)">
                                            <span *ngIf="zipcodename?.errors?.required">Zip Code is required.</span>
                                            <span *ngIf="zipcodename?.errors?.pattern">Zip Code should be include
                                                numbers only.</span>
                                        </span>
                                    </div>
                                </div>
                                <h4 class="heading">Professional Details</h4>
                                <div class="form-group row">
                                    <div class="col-md-4">
                                        <label for="department" class="control-label field-required">
                                            <i class="fas fa-user-graduate"></i>
                                        </label>
                                        <input class="form-control" type="text" name="desgName" id="desgId"
                                            placeholder="Enter Designation" pattern="[a-zA-Z\s]*"
                                            [ngClass]="{'is-error': (desgName?.invalid && (desgName?.dirty || desgName?.touched)) && desgName?.errors?.required}"
                                            [(ngModel)]="designation" #desgName="ngModel" required>
                                        <span class="is-error-note"
                                            *ngIf="desgName?.invalid && (desgName?.dirty || desgName?.touched)">
                                            <span *ngIf="desgName?.errors?.required">Designation is required.</span>
                                            <span *ngIf="desgName?.errors?.pattern">Designation should be include
                                                characters only.</span>
                                        </span>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="designation" class="control-label field-required">
                                            <i class="fas fa-university"></i>
                                        </label>
                                        <input class="form-control" type="text" name="deptName" id="deptId"
                                            placeholder="Enter Department" pattern="[a-zA-Z\s]*"
                                            [ngClass]="{'is-error': (deptName?.invalid && (deptName?.dirty || deptName?.touched)) && deptName?.errors?.required}"
                                            [(ngModel)]="department" #deptName="ngModel" required>
                                        <span class="is-error-note"
                                            *ngIf="deptName?.invalid && (deptName?.dirty || deptName?.touched)">
                                            <span *ngIf="deptName?.errors?.required">Department is required.</span>
                                            <span *ngIf="deptName?.errors?.pattern">Department should be include
                                                characters only.</span>
                                        </span>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="registrationdate" class="control-label field-required">
                                            <i class="fas fa-calendar"></i>
                                        </label>
                                        <input type="date" class="form-control" name="regName" id="regId" placeholder="Date of Registration" 
                                            [(ngModel)]="dateOfJoining" disabled required>
                                    </div>
                                </div>
                                <div class="clearfix">
                                    <button type="submit" class="btn btn-default" [disabled]="employeeForm.invalid"
                                    (click)="openSubmitModal()">
                                    Update
                                </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Update profile data modal -->
<div class="modal fade" id="submitReqModal" data-backdrop="static" data-keyboard="false" tabindex="-1"
    aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header" *ngIf="submitReq == 0">
                <h5 class="modal-title" id="exampleModalLabel">
                    Update Profile Data Confirmation
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <ng-container *ngIf="submitReq == 0">
                    <p>Are you sure, you want to update profile data?</p>
                </ng-container>
                <ng-container *ngIf="submitReq == 1">
                    <div class="text-center">
                        <!-- <span><i class="fas fa-circle-notch fa-spin"></i></span> -->
                        <div class="lds-ring">
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                        </div>
                    </div>
                    <div class="d-flex align-items-baseline justify-content-center text-center">
                        <span>Your request is being processed,</span>
                        <span class="ml-2">Please wait...</span>
                    </div>
                </ng-container>
                <ng-container *ngIf="submitReq == 2">
                    <div class="d-flex align-items-baseline justify-content-center text-center">
                        <span>Your request is processed successfully.</span>
                    </div>
                </ng-container>
                <ng-container *ngIf="submitReq == 3">
                    <div class="d-flex align-items-baseline justify-content-center text-center">
                        <span>Error while processing the request.</span>
                    </div>
                </ng-container>
            </div>
            <div class="modal-footer" *ngIf="submitReq == 0 || submitReq == 2 || submitReq == 3">
                <ng-container *ngIf="submitReq == 0">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" (click)="updateProfileData()">Save changes</button>
                </ng-container>
                <ng-container *ngIf="submitReq == 2 || submitReq == 3">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </ng-container>
            </div>
        </div>
    </div>
</div>